<!DOCTYPE html>
<html lang="en" >
{% load static %}
<head>
  <meta charset="UTF-8">
  <title>Gauge</title>
  <link rel="stylesheet" href="{% static 'css/button.css' %}"/>
  <style>
	.wrapper {
		border: 1px solid #ccc;
		width: 260px;
		margin:20px auto;
		padding: 0px;
		text-align:center;
		display: inline-block;
	}
  </style>
  <style>
		@import url(https://fonts.googleapis.com/css?family=Roboto);
		body {
			font-family: Roboto, sans-serif;
		}
		#chart1 {
			max-width: 265px;
			margin: 15px auto;
      display: inline-block;
		}
    #chart2 {
			max-width: 265px;
      display: inline-block;
		}
    #chart3 {
			max-width: 265px;
      display: inline-block;
		}
    #chart4 {
			max-width: 265px;
      display: inline-block;
		}
    #chart5 {
			max-width: 265px;
      display: inline-block;
		}
    .inblock{
      display: inline-block;
    }
	  </style>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>
<nav class="navbar navbar-expand-sm bg-primary navbar-dark">
  <ul class="navbar-nav">
    <li class="nav-item active">
      <a class="nav-link text-uppercase font-weight-bolder lead" href="/home">Safety Monitoring System</a>
    </li>
	<li class="nav-item">
      <a class="nav-link lead" href="#">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
    </li>
    <li class="nav-item">
      <a class="nav-link lead" href="/home">Dashboard</a>
    </li>
    <li class="nav-item">
      <a class="nav-link lead" href="#">Reports</a>
    </li>
    <li class="nav-item">
      <a class="nav-link lead" href="#">Admin</a>
    </li>
  </ul>
</nav>
<br>
<b>
  <h4 class="inblock" style="margin-left: 110px">Pressure</h4>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <h4 class="inblock">Vibration</h4>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <h4 class="inblock">Temperature</h4>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <h4 class="inblock">Noise</h4>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <h4 class="inblock">Air</h4>
</b><br>
  <div class="wrapper" style="margin-left: 25px">
	  <canvas id="gauge1"></canvas>
  </div>
  <div class="wrapper">
	  <canvas id="gauge2"></canvas>
  </div>
  <div class="wrapper">
	  <canvas id="gauge3"></canvas>
  </div>
  <div class="wrapper">
	  <canvas id="gauge4"></canvas>
  </div>
  <div class="wrapper">
	  <canvas id="gauge5"></canvas>
  </div>
  <div id="chart1"></div>
  <div id="chart2"></div>
  <div id="chart3"></div>
  <div id="chart4"></div>
  <div id="chart5"></div>
  <a class="buttonoff" href="#" id="button1">ALARM</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <a class="buttonoff" href="#" id="button2">ALARM</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <a class="buttonoff" href="#" id="button3">ALARM</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <a class="buttonoff" href="#" id="button4">ALARM</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <a class="buttonoff" href="#" id="button5">ALARM</a>

	<script>
		var button = document.getElementById("button1");
		function off(){
			var button = this;
			button.setAttribute("class","buttonoff");
			button.setAttribute("disabled","true");
		}
		button.onclick = off
	</script>
  <script src={% static 'js/1.js' %}></script>
  <script src={% static 'js/2.js' %}></script>
  <script>
	var gauge1 = new RadialGauge({
    renderTo: 'gauge1',
    width: 200,
    height: 200,
    units: "mb",
    value: 35,
    minValue:900,
    startAngle: 45,
    ticksAngle: 270,
    valueBox: true,
    maxValue: 940,
     majorTicks: ["900","904","906","908","910","912","914","916","918","920","940"],
    minorTicks: 4,
    strokeTicks: true,
    highlights: [
        {
          "from": 900,
          "to": 912,
          "color": "rgba(100, 255, 100, .2)"
        },
        {
          "from": 912,
          "to": 920,
          "color": "rgba(220, 200, 0, .75)"
        },
        {
            "from": 920,
            "to": 940,
            "color": "rgba(200, 50, 50, .75)"
        }
    ],
    colorPlate: "#fff",
    borderShadowWidth: 0,
    borders: false,
    needleType: "arrow",
    needleWidth: 5,
    needleCircleSize: 2,
    needleCircleOuter: true,
    needleCircleInner: false,
    animationDuration: 1500,
    animationRule: "linear"
}).draw();

var gauge2 = new RadialGauge({
    renderTo: 'gauge2',
    width: 200,
    height: 200,
    units: "Hz",
    value: 35,
    minValue: 80,
    startAngle: 45,
    ticksAngle: 270,
    valueBox: true,
    maxValue: 120,
    majorTicks: ["80","85","90","95","100","105","110","115","120"],
    minorTicks: 4,
    strokeTicks: true,
    highlights: [
        {
          "from": 80,
          "to": 95,
          "color": "rgba(100, 255, 100, .2)"
        },
        {
          "from": 95,
          "to": 110,
          "color": "rgba(220, 200, 0, .75)"
        },
        {
            "from": 110,
            "to": 120,
            "color": "rgba(200, 50, 50, .75)"
        }
    ],
    colorPlate: "#fff",
    borderShadowWidth: 0,
    borders: false,
    needleType: "arrow",
    needleWidth: 5,
    needleCircleSize: 2,
    needleCircleOuter: true,
    needleCircleInner: false,
    animationDuration: 1500,
    animationRule: "linear"
}).draw();

var gauge3 = new RadialGauge({
    renderTo: 'gauge3',
    width: 200,
    height: 200,
    units: "°F",
    value: 35,
    minValue: 0,
    startAngle: 45,
    ticksAngle: 270,
    valueBox: true,
    maxValue: 100,
    majorTicks: ["0","20","40","60","80","100"],
    minorTicks: 4,
    strokeTicks: true,
    highlights: [
        {
          "from": 0,
          "to": 60,
          "color": "rgba(100, 255, 100, .2)"
        },
        {
          "from": 60,
          "to": 80,
          "color": "rgba(220, 200, 0, .75)"
        },
        {
            "from": 80,
            "to": 100,
            "color": "rgba(200, 50, 50, .75)"
        }
    ],
    colorPlate: "#fff",
    borderShadowWidth: 0,
    borders: false,
    needleType: "arrow",
    needleWidth: 5,
    needleCircleSize: 2,
    needleCircleOuter: true,
    needleCircleInner: false,
    animationDuration: 1500,
    animationRule: "linear"
}).draw();

var gauge4 = new RadialGauge({
    renderTo: 'gauge4',
    width: 200,
    height: 200,
    units: "dB",
    value: 35,
    minValue: 60,
    startAngle: 45,
    ticksAngle: 270,
    valueBox: true,
    maxValue: 80,
    majorTicks: ["60","65","70","75","80"],
    minorTicks: 4,
    strokeTicks: true,
    highlights: [
        {
          "from": 60,
          "to": 65,
          "color": "rgba(100, 255, 100, .2)"
        },
        {
          "from": 65,
          "to": 75,
          "color": "rgba(220, 200, 0, .75)"
        },
        {
            "from": 75,
            "to": 80,
            "color": "rgba(200, 50, 50, .75)"
        }
    ],
    colorPlate: "#fff",
    borderShadowWidth: 0,
    borders: false,
    needleType: "arrow",
    needleWidth: 5,
    needleCircleSize: 2,
    needleCircleOuter: true,
    needleCircleInner: false,
    animationDuration: 1500,
    animationRule: "linear"
}).draw();

var gauge5 = new RadialGauge({
    renderTo: 'gauge5',
    width: 200,
    height: 200,
    units: "°C",
    value: 35,
    minValue: 0,
    startAngle: 45,
    ticksAngle: 270,
    valueBox: true,
    maxValue: 100,
    majorTicks: ["0","20","40","60","80","100"],
    minorTicks: 4,
    strokeTicks: true,
    highlights: [
        {
          "from": 0,
          "to": 60,
          "color": "rgba(100, 255, 100, .2)"
        },
        {
          "from": 60,
          "to": 80,
          "color": "rgba(220, 200, 0, .75)"
        },
        {
            "from": 80,
            "to": 100,
            "color": "rgba(200, 50, 50, .75)"
        }
    ],
    colorPlate: "#fff",
    borderShadowWidth: 0,
    borders: false,
    needleType: "arrow",
    needleWidth: 5,
    needleCircleSize: 2,
    needleCircleOuter: true,
    needleCircleInner: false,
    animationDuration: 1500,
    animationRule: "linear"
}).draw();
var gauge1Bound = 1000;
var gauge2Bound = 90;
var gauge3Bound = 90;
var gauge4Bound = 90;
var gauge5Bound = 90;
setInterval(function() {  
  var ourRequest = new XMLHttpRequest();
  ourRequest.open("GET", 'http://localhost:8000/home/data')
  ourRequest.onload = function(){
      var ourData = JSON.parse(ourRequest.responseText);
      console.log(ourData);
      gauge1.value = ourData['data1'];
      gauge2.value = ourData['data2'];
      gauge3.value = ourData['data3'];
      gauge4.value = ourData['data4'];
      gauge5.value = ourData['data5'];
      if(ourData['data1']>gauge1Bound){
        var button = document.getElementById("button1");
        button.setAttribute("class","buttonon");
      }
      if(ourData['data1']<=gauge1Bound){
        var button = document.getElementById("button1");
        button.setAttribute("class","buttonoff");
      }
      if(ourData['data2']>gauge2Bound){
        var button = document.getElementById("button2");
        button.setAttribute("class","buttonon");
      }
      if(ourData['data2']<=gauge2Bound){
        var button = document.getElementById("button2");
        button.setAttribute("class","buttonoff");
      }
      if(ourData['data3']>gauge3Bound){
        var button = document.getElementById("button3");
        button.setAttribute("class","buttonon");
      }
      if(ourData['data3']<=gauge3Bound){
        var button = document.getElementById("button3");
        button.setAttribute("class","buttonoff");
      }
      if(ourData['data4']>gauge4Bound){
        var button = document.getElementById("button4");
        button.setAttribute("class","buttonon");
      }
      if(ourData['data4']<=gauge4Bound){
        var button = document.getElementById("button4");
        button.setAttribute("class","buttonoff");
      }
      if(ourData['data5']>gauge5Bound){
        var button = document.getElementById("button5");
        button.setAttribute("class","buttonon");
      }
      if(ourData['data5']<=gauge5Bound){
        var button = document.getElementById("button5");
        button.setAttribute("class","buttonoff");
      }
  }
  ourRequest.send()
}, 500);
  </script>
  <script>
	var options1 = {
	chart: {
		type: 'area'
	},
	series: [{
		name: 'pressure',
		data: [903,904,904,915,920,917,922,928,930]
	}],
	xaxis: {
		categories: [1,2,3,4,5,6,7,8,9]
	}
	}
	var chart1 = new ApexCharts(document.querySelector("#chart1"), options1);
	chart1.render();

  var options2 = {
	chart: {
		type: 'area'
	},
	series: [{
		name: 'vibration',
		data: [85,89,80,82,92,110,30,61,25]
	}],
	xaxis: {
		categories: [1,2,3,4,5,6,7,8,9]
	}
	}
	var chart2 = new ApexCharts(document.querySelector("#chart2"), options2);
	chart2.render();

  var options3 = {
	chart: {
		type: 'area'
	},
	series: [{
		name: 'temperature',
		data: [30,46,90,50,49,20,80,61,25]
	}],
	xaxis: {
		categories: [1,2,3,4,5,6,7,8,9]
	}
	}
	var chart3 = new ApexCharts(document.querySelector("#chart3"), options3);
	chart3.render();

  var options4 = {
	chart: {
		type: 'area'
	},
	series: [{
		name: 'noise',
		data: [30,40,45,50,49,20,30,61,25]
	}],
	xaxis: {
		categories: [1,2,3,4,5,6,7,8,9]
	}
	}
	var chart4 = new ApexCharts(document.querySelector("#chart4"), options4);
	chart4.render();

  var options5 = {
	chart: {
		type: 'area'
	},
	series: [{
		name: 'air',
		data: [80,20,45,50,69,20,30,81,25]
	}],
	xaxis: {
		categories: [1,2,3,4,5,6,7,8,9]
	}
	}
	var chart5 = new ApexCharts(document.querySelector("#chart5"), options5);
	chart5.render();
	</script>
</body>
</html>